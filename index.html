<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pastel Studio - Visual Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&family=Poppins:wght@400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Nunito', 'sans-serif'],
                        brand: ['Poppins', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>

<body
    class="bg-slate-50 text-slate-600 dark:bg-neutral-950 dark:text-neutral-400 h-screen w-full flex overflow-hidden selection:bg-purple-100 selection:text-purple-700 dark:selection:bg-purple-900 dark:selection:text-white transition-colors duration-300">

    <!-- LEFT SIDEBAR -->
    <aside
        class="w-20 lg:w-72 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl border-r border-slate-200/60 dark:border-white/5 flex flex-col justify-between shrink-0 transition-all duration-300 z-20">

        <div class="flex flex-col h-2/3">
            <div
                class="h-16 flex items-center justify-between px-4 lg:px-6 border-b border-slate-100 dark:border-white/5">
                <div class="flex items-center">
                    <div
                        class="h-8 w-8 bg-gradient-to-tr from-purple-400 to-pink-300 dark:from-purple-500 dark:to-pink-400 rounded-xl flex items-center justify-center text-white shadow-lg shadow-purple-200/50 dark:shadow-purple-900/20">
                        <iconify-icon icon="solar:pallete-2-linear" width="18"></iconify-icon>
                    </div>
                    <span
                        class="ml-3 font-semibold text-lg tracking-tight text-slate-800 dark:text-neutral-100 hidden lg:block brand-font">Pastel.</span>
                </div>

                <button id="theme-toggle"
                    class="h-8 w-8 rounded-full bg-slate-100 dark:bg-white/5 text-slate-500 dark:text-neutral-400 flex items-center justify-center hover:bg-slate-200 dark:hover:bg-white/10 transition-colors">
                    <iconify-icon id="theme-icon" icon="solar:moon-linear" width="16"></iconify-icon>
                </button>
            </div>

            <div class="p-4 space-y-6 overflow-y-auto">
                <div>
                    <h3
                        class="text-xs uppercase tracking-wider text-slate-400 dark:text-neutral-500 font-semibold mb-3 px-2 hidden lg:block">
                        Insert</h3>
                    <div class="space-y-2">
                        <button id="tool-rectangle"
                            class="w-full flex items-center gap-3 px-3 py-2.5 rounded-2xl text-slate-600 dark:text-neutral-400 hover:bg-purple-50 dark:hover:bg-purple-500/10 hover:text-purple-600 dark:hover:text-purple-300 transition-colors group">
                            <div
                                class="w-8 h-8 rounded-xl bg-slate-50 dark:bg-white/5 text-slate-500 dark:text-neutral-500 group-hover:bg-purple-100 dark:group-hover:bg-purple-500/20 group-hover:text-purple-600 dark:group-hover:text-purple-300 flex items-center justify-center transition-colors">
                                <iconify-icon icon="solar:gallery-wide-linear" width="18"></iconify-icon>
                            </div>
                            <span class="text-sm font-medium hidden lg:block">Rectangle</span>
                        </button>

                        <button id="tool-text"
                            class="w-full flex items-center gap-3 px-3 py-2.5 rounded-2xl text-slate-600 dark:text-neutral-400 hover:bg-pink-50 dark:hover:bg-pink-500/10 hover:text-pink-600 dark:hover:text-pink-300 transition-colors group">
                            <div
                                class="w-8 h-8 rounded-xl bg-slate-50 dark:bg-white/5 text-slate-500 dark:text-neutral-500 group-hover:bg-pink-100 dark:group-hover:bg-pink-500/20 group-hover:text-pink-600 dark:group-hover:text-pink-300 flex items-center justify-center transition-colors">
                                <iconify-icon icon="solar:text-field-linear" width="18"></iconify-icon>
                            </div>
                            <span class="text-sm font-medium hidden lg:block">Text Layer</span>
                        </button>

                        <!-- Circle Tool - Placeholder ID for future use -->
                        <button id="tool-circle"
                            class="w-full flex items-center gap-3 px-3 py-2.5 rounded-2xl text-slate-600 dark:text-neutral-400 hover:bg-orange-50 dark:hover:bg-orange-500/10 hover:text-orange-600 dark:hover:text-orange-300 transition-colors group">
                            <div
                                class="w-8 h-8 rounded-xl bg-slate-50 dark:bg-white/5 text-slate-500 dark:text-neutral-500 group-hover:bg-orange-100 dark:group-hover:bg-orange-500/20 group-hover:text-orange-600 dark:group-hover:text-orange-300 flex items-center justify-center transition-colors">
                                <iconify-icon icon="solar:gallery-circle-linear" width="18"></iconify-icon>
                            </div>
                            <span class="text-sm font-medium hidden lg:block">Circle</span>
                        </button>
                    </div>
                </div>

                <div>
                    <h3
                        class="text-xs uppercase tracking-wider text-slate-400 dark:text-neutral-500 font-semibold mb-3 px-2 hidden lg:block">
                        Actions</h3>
                    <div class="space-y-2">
                        <button id="btn-export-json"
                            class="w-full flex items-center gap-3 px-3 py-2.5 rounded-2xl text-slate-600 dark:text-neutral-400 hover:bg-blue-50 dark:hover:bg-blue-500/10 hover:text-blue-600 dark:hover:text-blue-300 transition-colors group">
                            <div
                                class="w-8 h-8 rounded-xl bg-slate-50 dark:bg-white/5 text-slate-500 dark:text-neutral-500 group-hover:bg-blue-100 dark:group-hover:bg-blue-500/20 group-hover:text-blue-600 dark:group-hover:text-blue-300 flex items-center justify-center transition-colors">
                                <iconify-icon icon="solar:code-file-linear" width="18"></iconify-icon>
                            </div>
                            <span class="text-sm font-medium hidden lg:block">Export JSON</span>
                        </button>
                        <button id="btn-clear-canvas"
                            class="w-full flex items-center gap-3 px-3 py-2.5 rounded-2xl text-slate-600 dark:text-neutral-400 hover:bg-red-50 dark:hover:bg-red-500/10 hover:text-red-500 dark:hover:text-red-400 transition-colors group">
                            <div
                                class="w-8 h-8 rounded-xl bg-slate-50 dark:bg-white/5 text-slate-500 dark:text-neutral-500 group-hover:bg-red-100 dark:group-hover:bg-red-500/20 group-hover:text-red-500 dark:group-hover:text-red-400 flex items-center justify-center transition-colors">
                                <iconify-icon icon="solar:trash-bin-trash-linear" width="18"></iconify-icon>
                            </div>
                            <span class="text-sm font-medium hidden lg:block">Clear Canvas</span>
                        </button>
                        <!-- Added hidden Save button to maintain script compatibility or logic if needed, or we remap -->
                        <button id="btn-save" class="hidden">Save</button>
                        <button id="btn-export-html"
                            class="w-full flex items-center gap-3 px-3 py-2.5 rounded-2xl text-slate-600 dark:text-neutral-400 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 hover:text-emerald-600 dark:hover:text-emerald-300 transition-colors group">
                            <div
                                class="w-8 h-8 rounded-xl bg-slate-50 dark:bg-white/5 text-slate-500 dark:text-neutral-500 group-hover:bg-emerald-100 dark:group-hover:bg-emerald-500/20 group-hover:text-emerald-600 dark:group-hover:text-emerald-300 flex items-center justify-center transition-colors">
                                <iconify-icon icon="solar:file-download-linear" width="18"></iconify-icon>
                            </div>
                            <span class="text-sm font-medium hidden lg:block">Export HTML</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex-1 border-t border-slate-100 dark:border-white/5 flex flex-col overflow-hidden">
            <div class="p-4 pb-2 flex items-center justify-between hidden lg:flex">
                <h3 class="text-xs uppercase tracking-wider text-slate-400 dark:text-neutral-500 font-semibold">Layers
                </h3>
                <div class="flex gap-1">
                    <button id="layer-up" class="p-1 rounded hover:bg-slate-100 dark:hover:bg-white/10"
                        title="Move Up"><iconify-icon icon="solar:arrow-up-linear"></iconify-icon></button>
                    <button id="layer-down" class="p-1 rounded hover:bg-slate-100 dark:hover:bg-white/10"
                        title="Move Down"><iconify-icon icon="solar:arrow-down-linear"></iconify-icon></button>
                </div>
            </div>

            <div id="layers-list" class="overflow-y-auto px-2 lg:px-3 pb-4 space-y-1">
                <!-- Layers will be injected here -->
            </div>
        </div>
    </aside>

    <main class="flex-1 flex flex-col relative h-full">

        <!-- Floating Toolbar (Visual Only for now, creating select tool triggers) -->
        <div
            class="absolute top-4 left-1/2 -translate-x-1/2 z-10 bg-white/90 dark:bg-neutral-900/90 backdrop-blur shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-black/50 border border-slate-200/60 dark:border-white/10 rounded-full px-4 py-2 flex items-center gap-4 transition-colors duration-300">
            <button id="tool-select"
                class="flex items-center gap-2 text-slate-500 dark:text-neutral-400 hover:text-slate-800 dark:hover:text-white transition-colors">
                <iconify-icon icon="solar:mouse-minimalistic-linear" width="18"></iconify-icon>
                <span class="text-xs font-semibold">Select</span>
            </button>
            <div class="w-px h-4 bg-slate-200 dark:bg-white/10"></div>
            <div class="flex items-center gap-2">
                <button id="btn-zoom-out"
                    class="text-slate-400 dark:text-neutral-500 hover:text-slate-600 dark:hover:text-neutral-300 transition-colors p-1">
                    <iconify-icon icon="solar:minus-circle-linear" width="18"></iconify-icon>
                </button>
                <span id="zoom-level"
                    class="text-xs font-mono w-10 text-center text-slate-600 dark:text-neutral-400 select-none">100%</span>
                <button id="btn-zoom-in"
                    class="text-slate-400 dark:text-neutral-500 hover:text-slate-600 dark:hover:text-neutral-300 transition-colors p-1">
                    <iconify-icon icon="solar:add-circle-linear" width="18"></iconify-icon>
                </button>
            </div>
        </div>

        <div id="canvas-container"
            class="flex-1 bg-slate-100/50 dark:bg-neutral-950 p-4 lg:p-8 overflow-auto flex items-center justify-center cursor-grab active:cursor-grabbing transition-colors duration-300">
            <!-- Canvas / Artboard -->
            <div id="artboard"
                class="w-[800px] h-[600px] canvas-grid rounded-3xl shadow-sm dark:shadow-2xl dark:shadow-black/50 border border-slate-200 dark:border-neutral-800 relative overflow-hidden group/canvas transition-all duration-300">
                <!-- Elements injected here -->
            </div>
        </div>

        <!-- Mobile Properties Toggle (Visual) -->
        <div
            class="lg:hidden absolute bottom-0 w-full bg-white dark:bg-neutral-900 border-t border-slate-200 dark:border-white/10 p-4 flex justify-between items-center z-30">
            <span class="text-sm font-semibold text-slate-700 dark:text-neutral-200">Properties</span>
            <button class="bg-slate-100 dark:bg-neutral-800 p-2 rounded-full text-slate-600 dark:text-neutral-400">
                <iconify-icon icon="solar:settings-linear" width="20"></iconify-icon>
            </button>
        </div>
    </main>

    <!-- RIGHT SIDEBAR: PROPERTIES -->
    <aside id="properties-panel"
        class="w-80 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl border-l border-slate-200/60 dark:border-white/5 hidden lg:flex flex-col shrink-0 overflow-y-auto transition-all duration-300">

        <div class="h-14 border-b border-slate-100 dark:border-white/5 flex items-center px-6 justify-between">
            <span class="font-semibold text-sm text-slate-800 dark:text-neutral-200 tracking-tight">Properties</span>
            <span id="prop-type-display"
                class="text-xs text-slate-400 dark:text-neutral-400 bg-slate-50 dark:bg-white/5 px-2 py-1 rounded-md">None</span>
        </div>

        <div id="no-selection-msg" class="p-6 text-center text-slate-400 dark:text-neutral-500 italic text-sm">Select an
            element</div>

        <div id="properties-form" class="p-6 space-y-8 hidden">

            <div class="space-y-4">
                <h4
                    class="text-xs uppercase tracking-wider text-slate-400 dark:text-neutral-500 font-semibold flex items-center gap-2">
                    <iconify-icon icon="solar:move-linear" width="14"></iconify-icon> Layout
                </h4>

                <div class="grid grid-cols-2 gap-3">
                    <div class="relative group">
                        <div
                            class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-neutral-500 text-xs font-medium group-focus-within:text-purple-500 dark:group-focus-within:text-purple-400 transition-colors">
                            X</div>
                        <input type="number" id="prop-x"
                            class="w-full bg-slate-50 dark:bg-neutral-950 border border-slate-100 dark:border-white/10 rounded-xl py-2 pl-8 pr-3 text-sm font-medium text-slate-700 dark:text-neutral-300 focus:outline-none focus:ring-2 dark:focus:ring-1 focus:ring-purple-100 dark:focus:ring-purple-500/50 focus:bg-white dark:focus:bg-neutral-900 focus:border-purple-200 dark:focus:border-purple-500/50 transition-all text-right">
                    </div>
                    <div class="relative group">
                        <div
                            class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-neutral-500 text-xs font-medium group-focus-within:text-purple-500 dark:group-focus-within:text-purple-400 transition-colors">
                            Y</div>
                        <input type="number" id="prop-y"
                            class="w-full bg-slate-50 dark:bg-neutral-950 border border-slate-100 dark:border-white/10 rounded-xl py-2 pl-8 pr-3 text-sm font-medium text-slate-700 dark:text-neutral-300 focus:outline-none focus:ring-2 dark:focus:ring-1 focus:ring-purple-100 dark:focus:ring-purple-500/50 focus:bg-white dark:focus:bg-neutral-900 focus:border-purple-200 dark:focus:border-purple-500/50 transition-all text-right">
                    </div>
                    <div class="relative group">
                        <div
                            class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-neutral-500 text-xs font-medium group-focus-within:text-purple-500 dark:group-focus-within:text-purple-400 transition-colors">
                            W</div>
                        <input type="number" id="prop-w"
                            class="w-full bg-slate-50 dark:bg-neutral-950 border border-slate-100 dark:border-white/10 rounded-xl py-2 pl-8 pr-3 text-sm font-medium text-slate-700 dark:text-neutral-300 focus:outline-none focus:ring-2 dark:focus:ring-1 focus:ring-purple-100 dark:focus:ring-purple-500/50 focus:bg-white dark:focus:bg-neutral-900 focus:border-purple-200 dark:focus:border-purple-500/50 transition-all text-right">
                    </div>
                    <div class="relative group">
                        <div
                            class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-neutral-500 text-xs font-medium group-focus-within:text-purple-500 dark:group-focus-within:text-purple-400 transition-colors">
                            H</div>
                        <input type="number" id="prop-h"
                            class="w-full bg-slate-50 dark:bg-neutral-950 border border-slate-100 dark:border-white/10 rounded-xl py-2 pl-8 pr-3 text-sm font-medium text-slate-700 dark:text-neutral-300 focus:outline-none focus:ring-2 dark:focus:ring-1 focus:ring-purple-100 dark:focus:ring-purple-500/50 focus:bg-white dark:focus:bg-neutral-900 focus:border-purple-200 dark:focus:border-purple-500/50 transition-all text-right">
                    </div>
                </div>

                <div class="flex items-center gap-4 pt-1">
                    <iconify-icon icon="solar:refresh-circle-linear" class="text-slate-400 dark:text-neutral-500"
                        width="18"></iconify-icon>
                    <input type="range" id="prop-rotation" min="0" max="360" value="0" class="flex-1 accent-purple-500">
                    <span id="prop-rotation-display"
                        class="text-xs font-mono text-slate-500 dark:text-neutral-500 w-8 text-right">0°</span>
                </div>
            </div>

            <hr class="border-slate-100 dark:border-white/5">

            <div class="space-y-4">
                <div class="flex items-center justify-between">
                    <h4
                        class="text-xs uppercase tracking-wider text-slate-400 dark:text-neutral-500 font-semibold flex items-center gap-2">
                        <iconify-icon icon="solar:pallete-linear" width="14"></iconify-icon> Fill
                    </h4>
                </div>

                <div
                    class="bg-slate-50 dark:bg-neutral-950 p-2 rounded-2xl border border-slate-100 dark:border-white/10 flex items-center gap-3">
                    <div
                        class="w-8 h-8 rounded-lg bg-white dark:bg-neutral-800 border border-slate-200 dark:border-white/5 shadow-sm flex items-center justify-center cursor-pointer relative overflow-hidden">
                        <input type="color" id="prop-color"
                            class="absolute inset-0 opacity-0 cursor-pointer w-full h-full">
                        <div id="prop-color-preview" class="w-full h-full rounded-lg transition-colors"></div>
                    </div>
                    <input type="text" id="prop-color-hex" value="#FFFFFF"
                        class="bg-transparent text-sm font-medium text-slate-700 dark:text-neutral-300 w-20 focus:outline-none uppercase font-mono">
                </div>
            </div>

            <div id="prop-text-container" class="space-y-4 hidden">
                <hr class="border-slate-100 dark:border-white/5">
                <h4
                    class="text-xs uppercase tracking-wider text-slate-400 dark:text-neutral-500 font-semibold flex items-center gap-2">
                    <iconify-icon icon="solar:text-field-linear" width="14"></iconify-icon> Text
                </h4>
                <textarea id="prop-text-content" rows="3"
                    class="w-full bg-slate-50 dark:bg-neutral-950 border border-slate-100 dark:border-white/10 rounded-xl p-3 text-sm font-medium text-slate-700 dark:text-neutral-300 focus:outline-none focus:ring-2 dark:focus:ring-1 focus:ring-purple-100 dark:focus:ring-purple-500/50 transition-all"></textarea>
            </div>

        </div>
    </aside>

    <script src="script.js"></script>
    <script>
        // Init logic for rotation display and color preview specific to this UI
        const rotInput = document.getElementById('prop-rotation');
        const rotDisplay = document.getElementById('prop-rotation-display');
        rotInput.addEventListener('input', (e) => rotDisplay.innerText = e.target.value + '°');

        const colInput = document.getElementById('prop-color');
        const colPreview = document.getElementById('prop-color-preview');
        const colHex = document.getElementById('prop-color-hex');

        colInput.addEventListener('input', (e) => {
            colPreview.style.backgroundColor = e.target.value;
            colHex.value = e.target.value.toUpperCase();
        });
    </script>
</body>

</html>